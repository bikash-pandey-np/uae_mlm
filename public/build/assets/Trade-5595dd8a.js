import{r as n,a as B,u as O,B as g,j as e}from"./app-145e20ba.js";import{M as $}from"./MenuBar-35618e31.js";import H from"./BottomNavbar-c9597a9a.js";/* empty css              */import{a as z}from"./index.prod-15ad7e2f.js";import w from"./CountdownTimer-30508ac0.js";import{a as U}from"./index-bdac4c18.js";/* empty css            */import"./iconBase-10b2ed3d.js";import"./Logo-9c9f284c.js";import"./index-c681be0e.js";const W=({slug:s,type:x,active:_,balance:S,trades:b})=>{console.log("trades",b);const i=n.useRef(null),{flash:l}=B().props,N=n.useRef(null),[c,T]=n.useState("long"),[d,t]=n.useState(null),[C,y]=n.useState(!1),[f,j]=n.useState("Long"),{data:p,setData:h,post:E,processing:I,errors:v}=O({trade_amount:"",pair:s,type:"",trade_duration:1}),L=()=>{console.log("long modal"),j("Long"),h("type","Long"),y(!0)},D=()=>{console.log("short modal"),j("Short"),h("type","Short"),y(!0)},k=()=>{j("Long"),h("type",""),y(!1)},A=async r=>{r.preventDefault(),console.log("before send",p),await E(route("take_trade"),p)};n.useEffect(()=>{console.log("use effect toast");let r=null;return(l.success||l.error)&&(r&&g.dismiss(r),l.success?(console.log("success toast"),r=g.success(l.success,{pauseOnHover:!1,autoClose:2e3,onClose:()=>window.location.reload()})):l.error&&(console.log("error toast"),r=g.error(l.error,{pauseOnHover:!1,autoClose:2e3,onClose:()=>window.location.reload()}))),()=>{r&&g.dismiss(r)}},[l]),n.useEffect(()=>{const r=async()=>{try{const u=await fetch(route("current-price"));if(u.ok){const o=await u.json();s==="AAVEUSDT"&&t(o.aaveusd),s==="LINKUSDT"&&t(o.linkusd),s==="BTCUSDT"&&t(o.bitcoin),s==="ETHUSDT"&&t(o.ethereum),s==="ADAUSDT"&&t(o.adausd),s==="META"&&t(o.facebook),s==="TSLA"&&t(o.tesla),s==="GOOG"&&t(o.google),s==="NVDA"&&t(o.nvidia),s==="AMZN"&&t(o.amzn),s==="NFLX"&&t(o.netflix)}else console.error("Failed to fetch data")}catch(u){console.error("Error fetching data:",u)}};r();const m=setInterval(r,3e3),a=document.createElement("script");return a.src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",a.async=!0,a.innerHTML=JSON.stringify({symbol:x==="crypto"?`BINANCE:${s}`:`NASDAQ:${s}`,interval:"1",timezone:"Etc/UTC",theme:"light",style:"1",locale:"en",allow_symbol_change:!1,save_image:!1,calendar:!1,support_host:"https://www.tradingview.com",container_id:"tv-chart-container",library_path:"https://s3.tradingview.com/tv.js",autosize:!0,width:"100%",height:"100%",client_id:"tradingview-widget-container"}),a.onload=()=>{i.current&&i.current.appendChild(a)},i.current&&i.current.appendChild(a),()=>{i.current&&(i.current.removeChild(a),clearInterval(m))}},[s,x]),n.useEffect(()=>{typeof window.TradingView<"u"&&!N.current&&window.TradingView.onready(()=>{const r=new window.TradingView.widget({autosize:!0,symbol:x==="crypto"?`BINANCE:${s}`:`NASDAQ:${s}`,interval:"1",timezone:"Etc/UTC",theme:"light",style:"1",locale:"en",allow_symbol_change:!1,save_image:!1,calendar:!1,support_host:"https://www.tradingview.com",container_id:"tv-chart-container",library_path:"https://s3.tradingview.com/tv.js",client_id:"tradingview-widget-container"});N.current=r,(()=>{const a=document.getElementById("tv-chart-container");a&&(a.style.height="60vh")})()})},[s,x]);const M=r=>{T(r?"short":"long")};return e.jsxs("div",{children:[e.jsx($,{balance:S}),e.jsxs("section",{children:[e.jsxs("div",{className:"my-5 px-6 py-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:s}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"price",children:[e.jsx("p",{children:"Price"}),e.jsxs("h3",{className:"font-semibold text-xl",children:["$ ",d?d.price:null]}),e.jsxs("h3",{className:"font-semibold text-md",children:["~ â‚¹ ",d?(d.price*83.5).toFixed(2):null]})]}),e.jsxs("div",{className:"info col-span-1 text-right mt-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{children:"24H High"}),e.jsxs("p",{className:"font-semibold",children:["$ ",d?d.high:null]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{children:"24H Low"}),e.jsxs("p",{className:"font-semibold",children:["$ ",d?d.low:null]})]})]})]})]}),e.jsx("div",{id:"tv-chart-container",ref:i,style:{height:"60vh",width:"100%"}}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsx("button",{className:`bg-green-500 text-white py-2 rounded-md font-semibold hover:bg-green-600 transition duration-200 ${c==="long"?"bg-opacity-100":"bg-opacity-50"}`,onClick:L,children:"Long"}),e.jsx("button",{className:`bg-red-500 text-white py-2 rounded-md font-semibold hover:bg-red-600 transition duration-200 ${c==="short"?"bg-opacity-100":"bg-opacity-50"}`,onClick:D,children:"Short"}),C&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50"}),e.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full relative z-50",children:[f==="Long"&&e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Enter Long Trade"}),f==="Short"&&e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Enter Short Trade"}),e.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700",onClick:k,children:e.jsx(U,{size:24})}),e.jsxs("form",{onSubmit:A,children:[e.jsx("label",{className:"block mb-2",children:"Enter Trade amount (USDT)"}),e.jsx("input",{type:"number",className:"border border-gray-300 rounded-md w-full py-2 px-3 mb-4",placeholder:"Enter trade amount",value:p.trade_amount,onChange:r=>h("trade_amount",r.target.value)}),v.trade_amount&&e.jsx("p",{className:"text-sm text-red-600",children:v.trade_amount}),e.jsxs("div",{className:"mt-2 mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Trade Duration (Minutes)"}),e.jsxs("select",{id:"tradeDuration",className:"border border-gray-300 rounded-md px-3 py-2 ml-4",value:p.trade_duration,onChange:r=>h("trade_duration",r.target.value),children:[e.jsx("option",{value:"1",children:"1 minute"}),e.jsx("option",{value:"3",children:"3 minutes"}),e.jsx("option",{value:"5",children:"5 minutes"}),e.jsx("option",{value:"15",children:"15 minutes"})]})]}),e.jsx("button",{type:"submit",className:`py-2 px-4 rounded-md font-semibold transition duration-200 ${f==="Long"?"bg-green-500 text-white hover:bg-green-600":"bg-red-500 text-white hover:bg-red-600"}`,children:"Submit"})]})]})]})]}),e.jsx("div",{className:"flex justify-center items-center mb-4 mt-6",children:e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx(z,{checked:c==="short",onChange:M,className:"react-switch"}),e.jsxs("div",{className:"ml-3 text-gray-700 font-medium",children:["Toggle Order Book: ",c==="long"?"Long":"Short"]})]})}),e.jsxs("div",{className:"my-8",children:[c==="long"&&e.jsxs("div",{className:"bg-gray-100 p-4 rounded-md shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-500",children:"Long Order Book"}),e.jsxs("table",{className:"mb-6 w-full border-collapse border border-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-200 px-4 py-2",children:"Amount"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2",children:"Price"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2",children:"Duration (minutes)"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2",children:"Outcome"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2",children:"Ends in"})]})}),e.jsx("tbody",{children:b.map((r,m)=>{if(r.type==="Long")return e.jsxs("tr",{className:"border border-gray-200",children:[e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:r.amount}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:r.trade_price}),e.jsxs("td",{className:"border border-gray-200 px-4 py-2",children:[r.duration_minutes," Minutes"]}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:r.is_active?"Running":r.outcome}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:e.jsx(w,{ends_at:r.expired_time})})]},m)})})]})]}),c==="short"&&e.jsxs("div",{className:"bg-gray-100 p-4 rounded-md shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-500",children:"Short Order Book"}),e.jsxs("table",{className:"mb-6 w-full border-collapse border border-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-200 px-4 py-2",children:"Amount"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2",children:"Price"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2",children:"Duration (minutes)"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2",children:"Outcome"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2",children:"Ends in"})]})}),e.jsx("tbody",{children:b.map((r,m)=>{if(r.type==="Short")return e.jsxs("tr",{className:"border border-gray-200",children:[e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:r.amount}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:r.trade_price}),e.jsxs("td",{className:"border border-gray-200 px-4 py-2",children:[r.duration_minutes," Minutes"]}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:r.is_active?"Running":r.outcome}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:e.jsx(w,{ends_at:r.expired_time})})]},m)})})]})]})]})]}),e.jsx(H,{active:_})]})};export{W as default};
